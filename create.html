<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb"
        crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
        crossorigin="anonymous"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://www.gstatic.com/firebasejs/5.5.0/firebase.js"></script>
    <script>
        var config = {
            apiKey: "AIzaSyAycwLdjxQUjFEUezhzVkbnI-0DsrLMa0w",
            authDomain: "socialconnectapp123.firebaseapp.com",
            databaseURL: "https://socialconnectapp123.firebaseio.com",
            projectId: "socialconnectapp123",
            storageBucket: "socialconnectapp123.appspot.com",
            messagingSenderId: "124664150959"
        };
        firebase.initializeApp(config);
    </script>

</head>


<style>
    .card {
        background-color: rgb(248, 248, 248);
        border-color: transparent;

        margin: 8px 8px 8px 8px;
    }

    .card-body {
        position: "relative";
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .input-group {
        align-self: flex-end;
        max-width: 300px;
    }

    .form-control {
        max-width: 200px;
    }

    img {
        margin-right: 8px;
    }

    button {
        margin-top: 16px;
        margin-bottom: 16px;
        max-width: 600px;
    }
</style>

<body>
    <center>
        <img src="images/projectlogo.png" height="150">
    </center>
    <div id="container" class="container">

        <div class="card">
            <div class="card-body">

                <div id="top-section">

                </div>

                <!--
                <div class="col">
                    <div class="input-group">
                        <input type="text" class="form-control" aria-label="Name input textbox" placeholder="Your name">
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <input type="text" class="form-control" aria-label="Email input textbox" placeholder="youremail@gmail.com">
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <input type="tel" class="form-control" aria-label="Phone number input textbox" placeholder="215-555-1234">
                    </div>
                </div>
                <div class="col">
                    <div class="input-group">
                        <input type="tel" class="form-control" aria-label="Tagline input textbox" placeholder="Short tagline about you">
                    </div>
                </div>
                -->

            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <img src="images/Facebook.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <span class="input-group-addon" id="facebook-addon">facebook.com/</span>
                    <input id="facebook" type="text" class="form-control" placeholder="ringostarr" aria-label="Username" aria-describedby="basic-addon1">
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <img src="images/Twitter.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <span class="input-group-addon" id="twitter-addon">twitter.com/</span>
                    <input id="twitter" type="text" class="form-control" placeholder="jimgaffigan" aria-label="Username" aria-describedby="basic-addon1">
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <img src="images/Instagram.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <span class="input-group-addon" id="instagram-addon">instagram.com/</span>
                    <input id="instagram" type="text" class="form-control" placeholder="johnlennon" aria-label="Username" aria-describedby="basic-addon1">
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <img src="images/Snapchat.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <span class="input-group-addon" id="snapchat-addon">snapchat.com/add/</span>
                    <input id="snapchat" type="text" class="form-control" placeholder="KanyeWest" aria-label="Username" aria-describedby="basic-addon1">
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <img src="images/Youtube.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <span class="input-group-addon" id="youtube-addon">youtube.com/channel/</span>
                    <input id="youtube" type="text" class="form-control" placeholder="UCgMwkiS1UV1-CX9JZJRxtSQ" aria-label="Username" aria-describedby="basic-addon1">
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <img src="images/LinkedIn.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <span class="input-group-addon" id="linkedin-addon">linkedin.com/in/</span>
                    <input id="linkedin" type="text" class="form-control" placeholder="craigjapp" aria-label="Username" aria-describedby="basic-addon1">
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <img src="images/Tumblr.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <input id="tumblr" type="text" class="form-control" placeholder="designclever" aria-label="Username" aria-describedby="basic-addon1">
                    <span class="input-group-addon" id="tumblr-addon">.tumblr.com</span>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <img src="images/GitHub.png" height="40">
                <div class="input-group" style="max-width: 300px;">
                    <span class="input-group-addon" id="github-addon">github.com/</span>
                    <input id="github" type="text" class="form-control" placeholder="brendanmanning" aria-label="Username" aria-describedby="basic-addon1">
                </div>
            </div>
        </div>

        <center>
            <button onclick="create()" type="button" class="btn btn-primary btn-lg btn-block">Create</button>
        </center>

    </div>
</body>

<script>

    // UTILITY FUNCTION
    // Extract query parameters from the page's url
    // https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript
    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');
            if (decodeURIComponent(pair[0]) == variable) {
                return decodeURIComponent(pair[1]);
            }
        }
        return undefined;
    }

    // PLATFORM DETECTION
    // Change the redirection urls based on whether
    // this is an iOS or other device
    function os() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;

        // Windows Phone must come first because its UA also contains "Android"
        if (/windows phone/i.test(userAgent)) {
            return "Windows Phone";
        }

        if (/android/i.test(userAgent)) {
            return "Android";
        }

        // iOS detection from: http://stackoverflow.com/a/9039885/177710
        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
            return "iOS";
        }

        return "unknown";
    }

    // CREATE ACCOUNT
    // This fetches the account info from
    // the inputs and posts to Firebase
    function create() {

        var facebook = null;
        var twitter = null;
        var instagram = null;
        var snapchat = null;
        var tumblr = null;
        var youtube = null;
        var linkedin = null;
        var github = null;

        var name = null;
        var email = null;
        var phone = null;
        var tagline = null;

        facebook = document.getElementById("facebook").value;
        //twitter = document.getElementById("twitter").value;
        instagram = document.getElementById("instagram").value;
        snapchat = document.getElementById("snapchat").value;
        tumblr = document.getElementById("tumblr").value;
        //youtube = document.getElementById("youtube").value;
        linkedin = document.getElementById("linkedin").value;
        github = document.getElementById("github").value;

        var db = firebase.firestore();
        db.collection("urls").add({
            facebook: facebook,
            instagram: instagram,
            snapchat: snapchat,
            tumblr: tumblr,
            linkedin: linkedin,
            github: github
        }).then(function (docRef) {
            alert("https://brendanmanning.github.io/SocialConnect/connect.html?id=" + docRef.id);
        })
            .catch(function (error) {
                alert("Error creating SocialConnect profile:" + error);
            });
    }

    function renderTopSection() {
        if(os() == "iOS" || os() == "Android" || os() == "Windows Phone") {
            document.getElementById("top-section").innerHTML = '<div class="col"><div class="input-group"><input type="text" class="form-control" aria-label="Name input textbox" placeholder="Your name"></div></div><div class="col"><div class="input-group"><input type="text" class="form-control" aria-label="Email input textbox" placeholder="youremail@gmail.com"></div></div><div class="col"><div class="input-group"><input type="tel" class="form-control" aria-label="Phone number input textbox" placeholder="215-555-1234"></div></div><div class="col"><div class="input-group"><input type="tel" class="form-control" aria-label="Tagline input textbox" placeholder="Short tagline about you"></div></div>';
        }
    }

</script>

</html>